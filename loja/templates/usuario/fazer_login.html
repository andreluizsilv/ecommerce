{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="form-container">
    <h3>Faça seu Login</h3>

    <!-- Mensagem de erro -->
    {% if erro %}
        <div class="error-message">
            <h4>Informações inválidas! Tente novamente ou crie uma conta.</h4>
        </div>
    {% endif %}

    <!-- Formulário de login -->
    <form method="POST" action="{% url 'fazer_login' %}" class="login-form">
        {% csrf_token %}
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" placeholder="Email" required>
        </div>
        <div class="form-group">
            <label for="senha">Senha:</label>
            <input type="password" id="senha" name="senha" placeholder="Senha" required>
        </div>
        <button type="submit" class="btn-submit">Entrar</button>
    </form>

    <div class="form-links">
        <a href="{% url 'criar_conta' %}">Não tem conta? Criar Conta</a><br>
        <a href="{% url 'password_reset' %}">Esqueci minha Senha</a>
    </div>
</div>

 <main class="principal">
      <section class="conta">

        <div class="conta__container">
          <div class="checkout__titulos">
            <p class="checkout__titulo">Dados pessoais</p>
          </div>
             {% if erro == 'email_existente' %}
                <p>Já Existe um Usuário com esse Email</p>
             {% endif %}

          <form
            class="conta__form"
            action="{% url 'minha_conta' %}"
            method="post"
          >
          {% csrf_token %}
            <div class="conta__item">
              <label for="nome">Nome</label>
              <input name="nome" type="text" laceholder="Nome Completo"
                    {% if request.user.cliente.nome_cliente %}
                    value="{{ request.user.cliente.nome_cliente }}"
                    {% endif %} />
            </div>

            <div class="conta__item conta__item--email">
              <label for="email">E-mail</label>
              <input name="email" type="email" placeholder="Email" value="{{ request.user.email }}" />
            </div>

            <div class="conta__item">
              <label for="telefone">Telefone</label>
              <input name="telefone" type="number" placeholder="Telefone" value="{{ request.user.cliente.telefone }}"/>
            </div>

            <button class="subtotal__botao" type="submit">
              Salvar alterações
            </button>
          </form>
            <a href="{% url 'criar_conta' %}">Não tem conta? Criar Conta</a><br>
            <a href="{% url 'password_reset' %}">Esqueci minha Senha</a>
        </div>

      </section>
    </main>
{% endblock %}
